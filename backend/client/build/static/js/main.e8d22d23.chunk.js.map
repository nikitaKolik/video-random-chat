{"version":3,"sources":["reducers/auth.js","reducers/message.js","reducers/index.js","actions/types.js","store.js","services/auth.service.js","actions/auth.js","components/login.js","services/upload.service.js","components/register.js","communicate/socket.js","communicate/Emitter.js","communicate/MediaDevice.js","communicate/PeerConnection.js","components/filter_menu.js","services/report.js","components/report_menu.js","components/main_navbar.js","components/video_panel.js","components/msg.js","components/msg_input.js","components/msg_box.js","components/clietn_profile.js","components/view_img.js","components/loading.js","components/profile.js","components/main.js","services/ban.js","components/user_tab.js","components/admin.js","protected_route.js","helpers/history.js","App.js","actions/message.js","serviceWorker.js","index.js"],"names":["initialState","isLoggedIn","user","combineReducers","auth","state","action","type","payload","message","middleware","thunk","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","API_URL","process","login","a","axios","post","response","data","logout","localStorage","removeItem","console","log","headers","token","register","authenticate","sucess","getFriendInfo","id","update","getAll","get","success","error","dispatch","AuthService","setItem","JSON","stringify","required","value","className","role","Login","props","onChangeUsername","e","setState","username","target","onChangePassword","password","handleLogin","preventDefault","loading","form","validateAll","history","checkBtn","context","_errors","length","push","toRegister","this","to","style","backgroundColor","src","alt","onSubmit","ref","c","color","paddingRight","name","onChange","border","borderBottom","width","validations","disabled","display","textAlign","onClick","Component","connect","file","formData","FormData","append","then","res","path","catch","err","Register","onChangeAge","age","onChangeGender","gender","onChangeLocation","location","onChangeAboutMe","aboutMe","handleRegister","successful","UploadService","uploadAvatar","avatar","handleClick","event","hiddenFileInput","current","click","handleChange","fileUploaded","files","readURL","reader","FileReader","onload","avatarSrc","result","readAsDataURL","React","createRef","locationOptions","countryList","getData","map","item","idx","key","label","autoComplete","min","max","maxWidth","row","socket","io","Emitter","events","args","forEach","fn","_","isFunction","listeners","index","findIndex","_fn","splice","MediaDevice","navigator","mediaDevices","getUserMedia","video","facingMode","height","ideal","audio","stream","emit","DOMException","alert","on","len","arguments","track","enabled","set","getTracks","stop","PC_CONFIG","iceServers","urls","PeerConnection","friendID","pc","RTCPeerConnection","onicecandidate","candidate","ontrack","streams","mediaDevice","isCaller","config","addTrack","createOffer","start","isStarter","close","off","getDescription","bind","createAnswer","desc","setLocalDescription","sdp","rtcSdp","RTCSessionDescription","setRemoteDescription","iceCandidate","RTCIceCandidate","addIceCandidate","FilterMenu","handleLocation","currentTarget","handleAge","ageMin","ageMax","handleGender","checked","submitFilter","male","female","toggle","overflowY","padding","Slider","valueLabelDisplay","aria-labelledby","FormControlLabel","control","Checkbox","labelPlacement","ReportService","sendReport","report","ReportMenu","handleUsername","isMt","friendInfo","handleDescription","description","submitReport","msg","from","myId","Input","placeholder","inputProps","url","NabBar","logOut","endCall","window","reload","skip","filter","fontSize","_id","float","toggleProfile","margin","VideoPanel","peerSrc","localSrc","peerVideo","status","useRef","localVideo","useState","setVideo","setAudio","useEffect","srcObject","toggleMediaDevice","deviceType","autoPlay","alignItems","muted","Msg","LeftMsg","text","time","RightMsg","LeftFileMsg","viewImage","href","download","RightFileMsg","MsgInput","onEmojiClick","emoji","native","sendTyping","lastUpdateTime","Date","now","isTyping","friendId","startCheckingTyping","typingInterval","setInterval","stopCheckingTyping","clearInterval","sendMsg","uploadImage","fileSrc","getMsg","emojiBox","handleText","ext","split","pop","toLowerCase","handleCloseFileupload","handleEmojiBox","visibility","onSelect","friendTyping","onKeyUp","keyCode","MsgBox","scrollDown","container","refs","scrollTop","scrollHeight","resetChat","chats","mtFlag","getTime","date","getHours","getMinutes","slice","renderMsg","prevProps","prevState","ClientProfile","info","backgroundImage","ViewImg","Loading","Profile","handleUpdate","Main","getFriend","friend","startCall","newState","clientProfileFlag","viewImg","toggleFriendFlag","profile","clientId","document","title","setTimeout","disconnect","isEmpty","clientInfo","BanService","create","ip","delete","createAccount","deleteAccount","columns","field","headerName","UserTab","rows","pageSize","checkboxSelection","AdminBoard","init","authService","users","banService","bans","reportService","reports","newValue","AppBar","position","Tabs","variant","aria-label","LinkTab","a11yProps","TabPanel","children","other","hidden","Box","p","Tab","component","makeStyles","theme","root","flexGrow","palette","background","paper","ProtectedRoute","createBrowserHistory","App","currentUser","undefined","listen","exact","Boolean","hostname","match","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e8d22d23.chunk.js","sourcesContent":["import {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n  UPDATE_FAIL,\n  UPDATE_SUCCESS,\n} from \"../actions/types\";\n\n// const user = JSON.parse(localStorage.getItem(\"user\"));\nconst user = null;\nconst initialState = user\n  ? { isLoggedIn: true, user }\n  : { isLoggedIn: false, user: null };\n\nexport default function (state = initialState, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case REGISTER_SUCCESS:\n      return {\n        ...state,\n        isLoggedIn: false,\n      };\n    case REGISTER_FAIL:\n      return {\n        ...state,\n        isLoggedIn: false,\n      };\n    case LOGIN_SUCCESS:\n      return {\n        ...state,\n        isLoggedIn: true,\n        user: payload.user,\n      };\n    case LOGIN_FAIL:\n      return {\n        ...state,\n        isLoggedIn: false,\n        user: null,\n      };\n    case LOGOUT:\n      return {\n        ...state,\n        isLoggedIn: false,\n        // user: null,\n      };\n      case UPDATE_SUCCESS:\n        return {\n          ...state,\n          isLoggedIn: true,\n          user: payload.user,\n        };\n      case UPDATE_FAIL:\n        return {\n          ...state,\n          isLoggedIn: false,\n        };      \n    default:\n      return state;\n  }\n}\n","import { SET_MESSAGE, CLEAR_MESSAGE } from \"../actions/types\";\n\nconst initialState = {};\n\nexport default function (state = initialState, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case SET_MESSAGE:\n      return { message: payload };\n\n    case CLEAR_MESSAGE:\n      return { message: \"\" };\n\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from \"redux\";\nimport auth from \"./auth\";\nimport message from \"./message\";\n\nexport default combineReducers({\n  auth,\n  message,\n});\n","export const REGISTER_SUCCESS = \"REGISTER_SUCCESS\";\nexport const REGISTER_FAIL = \"REGISTER_FAIL\";\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport const LOGIN_FAIL = \"LOGIN_FAIL\";\nexport const LOGOUT = \"LOGOUT\";\n\nexport const SET_MESSAGE = \"SET_MESSAGE\";\nexport const CLEAR_MESSAGE = \"CLEAR_MESSAGE\";\n\nexport const UPDATE_SUCCESS = \"UPDATE_USER\";\nexport const UPDATE_FAIL = \"UPDATE_FAIL\";","import { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunk from \"redux-thunk\";\nimport rootReducer from \"./reducers\";\n\nconst middleware = [thunk];\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(...middleware))\n);\n\nexport default store;\n","import axios from \"axios\";\n\nconst API_URL = process.env.REACT_APP_API_URL+`/user`;\n\nclass AuthService {\n  login = async (user) => {\n    var response = await axios.post(API_URL+'/login', user);\n    return response.data;\n  }\n\n  logout = async (user) => {\n    localStorage.removeItem(\"user\");\n    console.log('log out..');\n    if(user) axios\n      .post(API_URL+'/logout', {}, {headers: {token: user.token} } );\n  }\n\n  register = async (user) => {\n    var response = await axios.post(API_URL, user);\n    return response.data;\n  }\n\n  authenticate = async (token) => {\n    var response = await axios.post(API_URL + '/authenticate', {}, {headers: {token}});\n    if(response.data.sucess === 'true') return true;\n    else return false;\n  }\n  getFriendInfo = async (id, token) => {\n    var response = await axios.post(API_URL + '/getAUser', {id}, {headers: {token}});\n    return response.data;\n  }\n  update = async (user, token) => {\n    var response = await axios.post(API_URL + '/update', {user}, {headers: {token}});\n    return response.data;\n  }\n  getAll = async (token) => {\n    try{\n      var response = await axios.get(API_URL + '/getAll', {headers: {token}});\n      return response.data;\n    }catch(err){\n      console.log(err);\n      return {success: false, error: \"some errors occured in client side\"};\n    }\n  }\n}\n\nexport default new AuthService();\n","import {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n  SET_MESSAGE,\n  UPDATE_FAIL,\n  UPDATE_SUCCESS,\n} from \"./types\";\n\nimport AuthService from \"../services/auth.service\";\n\nexport const register = (user) => async (dispatch) => {\n  var response = await AuthService.register(user);\n  if(response.success === true){\n      console.log(response)\n      dispatch({\n        type: REGISTER_SUCCESS,\n      })\n      dispatch({\n        type: SET_MESSAGE,\n        payload: response.message,\n      })\n      return response;\n  }else{\n      dispatch({\n        type: REGISTER_FAIL,\n      });\n      dispatch({\n        type: SET_MESSAGE,\n        payload: response.message || response.error,\n      });\n      return response;\n    }\n}\n\nexport const login = (user) => async (dispatch) => {\n  var response = await AuthService.login(user);\n  if(response.success === false){\n      dispatch({\n        type: LOGIN_FAIL,\n      });\n      dispatch({\n        type: SET_MESSAGE,\n        payload: response.message || response.error,\n      });\n  }\n  if(response.success === true){\n    if (response.token) {\n      localStorage.setItem(\"user\", JSON.stringify(response));\n    }\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: { user: response },\n    });   \n  }\n  return response;\n};\n\nexport const logout = (user) => (dispatch) => {\n  // AuthService.logout(user);\n  dispatch({\n    type: LOGOUT,\n  });\n};\n\nexport const update = (user, token) => async (dispatch) => {\n  var response = await AuthService.update(user, token);\n  if(response.success === false){\n      dispatch({\n        type: UPDATE_FAIL,\n      });\n      dispatch({\n        type: SET_MESSAGE,\n        payload: response.message || response.error,\n      });\n  }\n  if(response.success === true){\n    if (response.token) {\n      localStorage.setItem(\"user\", JSON.stringify(response));\n    }\n    dispatch({\n      type: UPDATE_SUCCESS,\n      payload: { user: response },\n    });   \n  }\n  return response;\n};","import React, { Component } from \"react\";\nimport { Redirect } from 'react-router-dom';\n\nimport Form from \"react-validation/build/form\";\nimport CheckButton from \"react-validation/build/button\";\n\nimport { connect } from \"react-redux\";\nimport { login } from \"../actions/auth\";\n\nconst required = (value) => {\n  if (!value) {\n    return (\n      <div className=\"alert alert-danger\" role=\"alert\">\n        This field is required!\n      </div>\n    );\n  }\n};\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      loading: false,\n    };\n  }\n\n  onChangeUsername = (e) => {\n    this.setState({\n      username: e.target.value,\n    });\n  }\n\n  onChangePassword = (e) => {\n    this.setState({\n      password: e.target.value,\n    });\n  }\n\n  handleLogin = async (e) => {\n    e.preventDefault();\n\n    this.setState({\n      loading: true,\n    });\n\n    this.form.validateAll();\n\n    const { dispatch, history } = this.props;\n    const {username, password} = this.state;\n    console.log(\"login state...\", this.state);\n    if (this.checkBtn.context._errors.length === 0) {\n      var user = await dispatch( login({username, password}) );\n      if(user.success === true) {\n        history.push(\"/main\");\n      }else {\n        this.setState({\n          loading: false\n        });\n      };\n    }else {\n        this.setState({\n          loading: false,\n        });\n    }\n  }\n  toRegister = () => {\n    this.props.history.push('/register');\n  }\n  render() {\n    const { isLoggedIn, message } = this.props;\n    if (isLoggedIn) {\n      return <Redirect to=\"/main\" />;\n    }\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"card card-container shadow-lg\" style={{backgroundColor:\"white\"}}>\n          <img\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\n            alt=\"profile-img\"\n            className=\"profile-img-card\"\n          />\n          <Form\n            onSubmit={this.handleLogin}\n            ref={(c) => {\n              this.form = c;\n            }}\n          >\n            <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Username: </div>\n                    <input\n                      type=\"text\"\n                      name=\"username\"\n                      className=\"app-info-input\"\n                      value={this.state.username}\n                      onChange={this.onChangeUsername}\n                      style={{ border:'none', borderBottom: \"solid 2px #eee\", width: '178px'}}\n                    />\n                </div>\n\n            <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Password: </div>\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    className=\"app-info-input\"\n                    value={this.state.password}\n                    onChange={this.onChangePassword}\n                    validations={[required]}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\", width: '178px'}}\n                  />\n                </div>\n\n            <div className=\"form-group pt-3\">\n              <button\n                className=\"btn btn-primary btn-block\"\n                style={{backgroundColor: 'slateblue', border: \"none\"}}\n                disabled={this.state.loading}\n              >\n                {this.state.loading && (\n                  <span className=\"spinner-border spinner-border-sm\"></span>\n                )}\n                <span>Login</span>\n              </button>\n            </div>\n\n            {message && (\n              <div className=\"form-group\">\n                <div className=\"alert alert-danger\" role=\"alert\">\n                  {message}\n                </div>\n              </div>\n            )}\n            <CheckButton\n              style={{ display: \"none\" }}\n              ref={(c) => {\n                this.checkBtn = c;\n              }}\n            />\n          </Form>\n          <div style={{textAlign: 'center'}}>\n            Not a member?<a onClick={this.toRegister} style={{color: 'slateblue', display: 'block'}}>Sign up now</a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  const { isLoggedIn } = state.auth;\n  const { message } = state.message;\n  return {\n    isLoggedIn,\n    message\n  };\n}\n\nexport default connect(mapStateToProps)(Login);\n","import axios from 'axios';\r\n\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL + '/upload';\r\n\r\nclass UploadService {\r\n  uploadAvatar(file) {\r\n    const formData = new FormData();\r\n    formData.append('file', file); // appending file\r\n    return axios.post(API_URL + '/avatar', formData).then(res => {\r\n        console.log(res);\r\n        if(res.data.success === \"true\") return res.data.path;\r\n        return null;\r\n    }).catch(err => {\r\n        console.log(err);\r\n        return null;\r\n    });\r\n  }\r\n  uploadImage(file) {\r\n    const formData = new FormData();\r\n    formData.append('file', file); // appending file\r\n    return axios.post(API_URL + '/image', formData).then(res => {\r\n        console.log(res);\r\n        if(res.data.success === \"true\") return res.data.path;\r\n        return null;\r\n    }).catch(err => {\r\n        console.log(err);\r\n        return null;\r\n    });\r\n  }\r\n}\r\n\r\nexport default new UploadService();\r\n","import React, { Component } from \"react\";\nimport Form from \"react-validation/build/form\";\nimport CheckButton from \"react-validation/build/button\";\nimport UploadService from '../services/upload.service';\nimport countryList from 'react-select-country-list';\nimport { connect } from \"react-redux\";\nimport { register } from \"../actions/auth\";\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      age: 0,\n      gender: 'Male',\n      location: '',\n      aboutMe: '',\n      file: null,\n      avatarSrc: null,\n      successful: false,\n    };\n    this.hiddenFileInput = React.createRef();\n    this.locationOptions = countryList().getData().map((item, idx) => {\n      return <option key={idx}>{item.label}</option>;\n    });\n  }\n\n  onChangeUsername = (e) => {\n    this.setState({\n      username: e.target.value,\n    });\n  }\n  onChangeAge = (e) => {\n    this.setState({\n      age: e.target.value,\n    });\n  }\n  onChangeGender = (e) => {\n    this.setState({\n      gender: e.target.value,\n    });\n  }\n  onChangeLocation = (e) => {\n    this.setState({\n      location: e.target.value,\n    });\n  }\n  onChangeAboutMe = (e) => {\n    this.setState({\n      aboutMe: e.target.value,\n    });\n  }\n  onChangePassword = (e) => {\n    this.setState({\n      password: e.target.value,\n    });\n  }\n\n  handleRegister = async (e) => {\n    e.preventDefault();\n\n    this.setState({\n      successful: false,\n    });\n\n    this.form.validateAll();\n    const {file, username, age, gender, location, password, aboutMe} = this.state;\n    let avatar;\n    if (this.checkBtn.context._errors.length === 0) {\n      if(file){\n        avatar = await UploadService.uploadAvatar(file);\n      }\n      var response = await this.props.dispatch( register({ username, age, gender, location, password, aboutMe, avatar }) );\n      if(response.success === true){\n          this.setState({\n            successful: true,\n          });\n          this.props.history.push(\"/login\");\n        }else {\n          this.setState({\n            successful: false,\n          });\n        }\n    }\n  }\n  handleClick = async event => {\n    await this.hiddenFileInput.current.click();\n  };\n  handleChange = async event => {\n    const fileUploaded = event.target.files[0];\n    if(fileUploaded){\n        console.log(fileUploaded);\n        await this.readURL(fileUploaded);\n        await this.setState({file: fileUploaded});\n    }\n  }\n  readURL = async (file) => {\n    if (file) {\n        var reader = new FileReader();\n\n        reader.onload = async (e) => {\n          await this.setState({avatarSrc: e.target.result});\n        };\n\n        reader.readAsDataURL(file);\n    }\n  }\n  render() {\n    const { message } = this.props;\n    const {file, avatarSrc} = this.state;\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"card card-container shadow-lg\" style={{backgroundColor:\"white\"}}>\n          <input type=\"file\"\n                ref={this.hiddenFileInput}\n                onChange={this.handleChange}\n                style={{display:'none'}} \n          /> \n          <img\n            src={file ? avatarSrc : \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"}\n            alt=\"profile-img\"\n            className=\"profile-img-card\"\n            onClick={this.handleClick}\n          />\n\n          <Form\n            onSubmit={this.handleRegister}\n            ref={(c) => {\n              this.form = c;\n            }}\n          >\n            {!this.state.successful && (\n              <div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Username: </div>\n                  <input\n                    type=\"text\"\n                    name=\"username\"\n                    className=\"app-info-input\"\n                    autoComplete=\"off\"\n                    value={this.state.username}\n                    onChange={this.onChangeUsername}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                    required\n                  />\n                </div>\n                <div className=\"d-flex pt-3 justify-content-between form-group\">\n                  <div className=\"d-flex form-group\">\n                    <div style={{color: '#ccc', paddingRight: '6px'}}>gender: </div>\n                    <select \n                      style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                      value={this.state.gender}\n                      onChange={this.onChangeGender}\n                      required\n                    >\n                      <option>Male</option>\n                      <option>Female</option>\n                      <option>orther</option>\n                    </select>\n                  </div>\n                  <div className=\"d-flex form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Age: </div>\n                  <input\n                        type=\"number\"\n                        name=\"username\"\n                        value={this.state.age}\n                        autoComplete=\"off\"\n                        onChange={this.onChangeAge}\n                        style={{ border:'none', borderBottom: \"solid 2px #eee\", width: \"50px\"}}\n                        min='13'\n                        max='99'\n                        required\n                  />\n                  </div>\n                </div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Location: </div>\n                  <select \n                      style={{ border:'none', borderBottom: \"solid 2px #eee\", maxWidth: \"178px\"}}\n                      value={this.state.location}\n                      onChange={this.onChangeLocation}\n                      required\n                    >\n                      {\n                        this.locationOptions\n                      }\n                    </select>\n                </div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Password: </div>\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    className=\"app-info-input\"\n                    value={this.state.password}\n                    onChange={this.onChangePassword}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                    required\n                  />\n                </div>\n                <div className=\"pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>About me: </div>\n                  <textarea\n                    row=\"3\"\n                    value={this.state.aboutMe}\n                    onChange={this.onChangeAboutMe}\n                    // validations={[required, vpassword]}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\", width: \"100%\"}}\n                  />\n                </div>\n                <div className=\"form-group pt-3\">\n                  <button className=\"btn btn-primary btn-block\" style={{backgroundColor: 'slateblue', border: \"none\"}}>Sign Up</button>\n                </div>\n              </div>\n            )}\n\n            {message && (\n              <div className=\"form-group\">\n                <div className={ this.state.successful ? \"alert alert-success\" : \"alert alert-danger\" } role=\"alert\">\n                  {message}\n                </div>\n              </div>\n            )}\n            <CheckButton\n              style={{ display: \"none\" }}\n              ref={(c) => {\n                this.checkBtn = c;\n              }}\n            />\n          </Form>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  const { message } = state.message;\n  return {\n    message,\n  };\n}\n\nexport default connect(mapStateToProps)(Register);\n","import io from 'socket.io-client';\nconst ENDPOINT = process.env.REACT_APP_SOCK;\nconst socket = io(ENDPOINT);\n\nexport default socket;\n","import _ from 'lodash';\n\nclass Emitter {\n  constructor() {\n    this.events = {};\n  }\n\n  emit(event, ...args) {\n    if (this.events[event]) {\n      this.events[event].forEach((fn) => fn(...args));\n    }\n    return this;\n  }\n\n  on(event, fn) {\n    if (this.events[event]) this.events[event].push(fn);\n    else this.events[event] = [fn];\n    return this;\n  }\n\n  off(event, fn) {\n    if (event && _.isFunction(fn)) {\n      const listeners = this.events[event];\n      const index = listeners.findIndex((_fn) => _fn === fn);\n      listeners.splice(index, 1);\n    } else this.events[event] = [];\n    return this;\n  }\n}\n\nexport default Emitter;\n","import _ from 'lodash';\nimport Emitter from './Emitter';\n\n/**\n * Manage all media devices\n */\nclass MediaDevice extends Emitter {\n  /**\n   * Start media devices and send stream\n   */\n  start() {\n    const constraints = {\n      video: {\n        facingMode: 'user',\n        height: { min: 360, ideal: 720, max: 1080 }\n      },\n      audio: true\n    };\n    navigator.mediaDevices\n      .getUserMedia(constraints)\n      .then((stream) => {\n        this.stream = stream;\n        this.emit('stream', stream);\n      })\n      .catch((err) => {\n        if (err instanceof DOMException) {\n          alert('Cannot open webcam and/or microphone');\n        } else {\n          console.log(\"here..................\",err);\n        }\n      });\n\n    return this;\n  }\n\n  /**\n   * Turn on/off a device\n   * @param {String} type - Type of the device\n   * @param {Boolean} [on] - State of the device\n   */\n  toggle(type, on) {\n    const len = arguments.length;\n    if (this.stream) {\n      this.stream[`get${type}Tracks`]().forEach((track) => {\n        const state = len === 2 ? on : !track.enabled;\n        _.set(track, 'enabled', state);\n      });\n    }\n    return this;\n  }\n\n  /**\n   * Stop all media track of devices\n   */\n  stop() {\n    if (this.stream) {\n      this.stream.getTracks().forEach((track) => track.stop());\n    }\n    return this;\n  }\n}\n\nexport default MediaDevice;\n","import MediaDevice from './MediaDevice';\nimport Emitter from './Emitter';\nimport socket from './socket';\n\nconst PC_CONFIG = { iceServers: [{ urls: ['stun:stun.l.google.com:19302'] }] };\n\nclass PeerConnection extends Emitter {\n  /**\n     * Create a PeerConnection.\n     * @param {String} friendID - ID of the friend you want to call.\n     */\n  constructor(friendID) {\n    super();\n    this.pc = new RTCPeerConnection(PC_CONFIG);\n    this.pc.onicecandidate = (event) => socket.emit('call', {\n      to: this.friendID,\n      candidate: event.candidate\n    });\n    this.pc.ontrack = (event) => this.emit('peerStream', event.streams[0]);\n\n    this.mediaDevice = new MediaDevice();\n    this.friendID = friendID;\n  }\n\n  /**\n   * Starting the call\n   * @param {Boolean} isCaller\n   * @param {Object} config - configuration for the call {audio: boolean, video: boolean}\n   */\n  start(isCaller, config) {\n    this.mediaDevice\n      .on('stream', (stream) => {\n        stream.getTracks().forEach((track) => {\n          this.pc.addTrack(track, stream);\n        });\n        this.emit('localStream', stream);\n        if (isCaller) {\n          socket.emit('request', { to: this.friendID });\n        }\n        else this.createOffer();\n      })\n      .start(config);\n\n    return this;\n  }\n\n  /**\n   * Stop the call\n   * @param {Boolean} isStarter\n   */\n  stop(isStarter) {\n    if (isStarter) {\n      socket.emit('end', { to: this.friendID });\n    }\n    this.mediaDevice.stop();\n    this.pc.close();\n    this.pc = null;\n    this.off();\n    return this;\n  }\n\n  createOffer() {\n    this.pc.createOffer()\n      .then(this.getDescription.bind(this))\n      .catch((err) => console.log(err));\n    return this;\n  }\n\n  createAnswer() {\n    this.pc.createAnswer()\n      .then(this.getDescription.bind(this))\n      .catch((err) => console.log(err));\n    return this;\n  }\n\n  getDescription(desc) {\n    this.pc.setLocalDescription(desc);\n    socket.emit('call', { to: this.friendID, sdp: desc });\n    return this;\n  }\n\n  /**\n   * @param {Object} sdp - Session description\n   */\n  setRemoteDescription(sdp) {\n    const rtcSdp = new RTCSessionDescription(sdp);\n    this.pc.setRemoteDescription(rtcSdp);\n    return this;\n  }\n\n  /**\n   * @param {Object} candidate - ICE Candidate\n   */\n  addIceCandidate(candidate) {\n    if (candidate) {\n      const iceCandidate = new RTCIceCandidate(candidate);\n      this.pc.addIceCandidate(iceCandidate);\n    }\n    return this;\n  }\n}\n\nexport default PeerConnection;\n","\r\nimport React, { Component } from \"react\";\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport countryList from 'react-select-country-list';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport socket from '../communicate/socket';\r\n\r\nclass FilterMenu extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n          ageMin: 1,\r\n          ageMax: 100,\r\n          location: '',\r\n          male:true,\r\n          female:true,\r\n        }\r\n        this.locationOptions = countryList().getData().map((item, idx) => {\r\n          return <option key={idx}>{item.label}</option>;\r\n        });\r\n    }\r\n    handleLocation = (e) => {\r\n      this.setState({ location: e.currentTarget.value});\r\n    }\r\n    handleAge = (event, value) => {\r\n      this.setState({\r\n        ageMin: value[0],\r\n        ageMax: value[1]\r\n      });\r\n    };\r\n    handleGender = (event) => {\r\n      let target = event.currentTarget;\r\n      this.setState({\r\n        [target.value]: target.checked\r\n      });\r\n    }\r\n    submitFilter = async () => {\r\n      const {ageMin, ageMax, male, female, location} = this.state;\r\n      let gender = 'all';\r\n      if(male && !female) gender = 'Male';\r\n      else if(!male && female) gender = 'Female';\r\n      socket.emit('filter', {ageMin, ageMax, location, gender}); \r\n      await this.props.toggle();\r\n    }\r\n    render() {\r\n      const {ageMin, ageMax} = this.state;\r\n      return (\r\n        <div className=\"hide-overflow\" style={{ overflowY: 'auto', padding: '15px'}}>\r\n          <div className='d-flex align-items-center justify-content-between' style={{borderBottom: '2px solid grey'}}>\r\n            <div className=\"d-flex\"><i className=\"fa fa-search\" style={{paddingRight: '5px', color: 'black'}}></i><h4 >Filter</h4></div>\r\n            <i className=\"fas fa-times my-cursor\" onClick={this.props.toggle}></i>\r\n          </div>\r\n          <div style={{padding: '1vw'}}>\r\n          <div className=\"d-flex pt-3 form-group\">\r\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Location: </div>\r\n                  <select \r\n                      style={{ border:'none', borderBottom: \"solid 2px #eee\", maxWidth: \"178px\", backgroundColor: '#fafafa'}}\r\n                      value={this.state.location}\r\n                      onChange={this.handleLocation}\r\n                      required\r\n                    >\r\n                      {\r\n                        this.locationOptions\r\n                      }\r\n                    </select>\r\n                </div>\r\n            <div className=\"d-flex pt-3 form-group\">\r\n                    <div style={{color: '#ccc', paddingRight: '6px'}}>Age Range: </div>\r\n                    <Slider\r\n                      min={13}\r\n                      max={99}\r\n                      value={[ageMin, ageMax]}\r\n                      onChange={this.handleAge}\r\n                      valueLabelDisplay=\"auto\"\r\n                      aria-labelledby=\"range-slider\"\r\n                    />\r\n            </div>\r\n            <div className=\"d-flex pt-3 form-group align-items-center\">\r\n                    <div style={{color: '#ccc', paddingRight: '6px'}}>Gender: </div>\r\n                    <FormControlLabel\r\n                      value=\"male\"\r\n                      control={<Checkbox color=\"primary\" />}\r\n                      label=\"Male\"\r\n                      labelPlacement=\"end\"\r\n                      checked={this.state.male}\r\n                      onChange={this.handleGender}\r\n                    />\r\n                    <FormControlLabel\r\n                      value=\"female\"\r\n                      control={<Checkbox color=\"primary\" />}\r\n                      label=\"Female\"\r\n                      labelPlacement=\"end\"\r\n                      checked={this.state.female}\r\n                      onChange={this.handleGender}\r\n                    />\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group pt-3\">\r\n            <button className=\"btn btn-primary btn-block\" onClick={this.submitFilter} style={{backgroundColor: 'slateblue', border: \"none\"}}>Apply</button>\r\n          </div>\r\n        </div>\r\n      );  \r\n    }\r\n}\r\n\r\nexport default FilterMenu;\r\n","import axios from 'axios';\r\n\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL + '/report';\r\n\r\nconst ReportService = {\r\n    sendReport: (report) => {\r\n        return axios.post(API_URL, {...report}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n    getAll : async (token) => {\r\n        try{\r\n          var response = await axios.get(API_URL + '/getAll', {headers: {token}});\r\n          return response.data;\r\n        }catch(err){\r\n          console.log(err);\r\n          return {success: false, error: \"some errors occured in client side\"};\r\n        }\r\n    }\r\n}\r\n\r\nexport default ReportService;\r\n","\r\nimport React, { Component } from \"react\";\r\nimport Input from '@material-ui/core/Input';\r\nimport socket from '../communicate/socket';\r\nimport ReportService from '../services/report';\r\n\r\nclass ReportMenu extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            username: this.props.friendInfo ? this.props.friendInfo.username : '',\r\n            description: '',\r\n            msg: null,\r\n        }\r\n        this.isMt = false;\r\n    }\r\n    componentDidMount() {\r\n      this.isMt = true;\r\n    }\r\n    componentWillUnmount(){\r\n      this.isMt = false;\r\n    }\r\n    handleUsername = (e) => {\r\n        if(this.isMt && !this.props.friendInfo) this.setState({username: e.currentTarget.value});\r\n    }\r\n    handleDescription = (e) => {\r\n      if(this.isMt) this.setState({description: e.currentTarget.value});\r\n    }\r\n    submitReport = async (e) => {\r\n        e.preventDefault();\r\n        if(this.isMt) await this.setState({msg: null});\r\n        let result = await ReportService.sendReport ({ to: this.state.username, description: this.state.description, from: this.props.myId});\r\n        console.log('report result', result);\r\n        if(result.success === true) {\r\n          socket.emit('report');\r\n          if(this.isMt) this.setState({\r\n            username: this.props.friendInfo ? this.props.friendInfo.username : '',\r\n            description: '',\r\n            msg: null,\r\n          });\r\n          await this.props.toggle();\r\n        }else{\r\n          if(this.isMt) this.setState({ msg: result.message});\r\n        }\r\n    }\r\n    render() {\r\n      return (\r\n        <div className=\"hide-overflow\" style={{overflowY: 'auto', padding: '15px', width: '250px'}}>\r\n          <div className='d-flex align-items-center justify-content-between' style={{borderBottom: '2px solid grey'}}>\r\n           <div className=\"d-flex\"><i className=\"fa fa-envelope-open-text\" style={{paddingRight: '5px', color: 'black'}}></i><h4 >Report</h4></div>\r\n           <i className=\"fas fa-times my-cursor\" onClick={this.props.toggle}></i>\r\n          </div>\r\n          <form style={{padding: '1vw'}}>\r\n            <div className=\"d-flex pt-3 form-group\">\r\n                 <Input placeholder=\"Username\" \r\n                    inputProps={{ 'aria-label': 'description' }} \r\n                    value = { this.props.friendInfo ? this.props.friendInfo.username : this.state.username}\r\n                    onChange = {this.handleUsername}\r\n                    required\r\n                />\r\n            </div>\r\n            <div className=\"pt-3 form-group\">\r\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>description: </div>\r\n                  <textarea\r\n                    row=\"20\"\r\n                    value={this.state.description}\r\n                    onChange={this.handleDescription}\r\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\", width: \"100%\", backgroundColor: '#fafafa', height: '20vh'}}\r\n                    required\r\n                 />\r\n                </div>\r\n            <div className=\"form-group pt-3\">\r\n                <button className=\"btn btn-primary btn-block\" type=\"submit\" onClick={this.submitReport} style={{backgroundColor: 'slateblue', border: \"none\"}}>Report</button>\r\n            </div>\r\n            {this.state.msg && (\r\n              <div className=\"form-group\">\r\n                <div className=\"alert alert-danger\" role=\"alert\">\r\n                  {this.state.msg}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </div>\r\n      );  \r\n    }\r\n}\r\n\r\nexport default ReportMenu;\r\n","import React, { Component } from \"react\";\r\nimport FilterMenu from './filter_menu';\r\nimport ReportMenu from './report_menu.js';\r\nimport { connect } from \"react-redux\";\r\nimport { logout } from \"../actions/auth\";\r\nconst url = process.env.REACT_APP_SOCK;\r\nclass NabBar extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            filter: false,\r\n            report: false,\r\n        }\r\n        this.isMt = false;\r\n    }\r\n    componentDidMount(){\r\n        this.isMt = true;\r\n    }\r\n    logOut = async () => { \r\n        await this.props.endCall(true);\r\n        await this.props.dispatch(logout(this.props.user));\r\n        window.location.reload();    \r\n    }\r\n    skip = async() => {\r\n        if(this.isMt) await this.props.skip();\r\n    }\r\n    toggle = (value) => {\r\n        return async () => {\r\n            if(this.isMt){\r\n                await this.setState({\r\n                    [value] : !this.state[value]\r\n                 });\r\n                if(value === 'filter' && this.state.filter === true) await this.setState({report: false});\r\n                if(value === 'report' && this.state.report === true) await this.setState({filter: false});\r\n                console.log('navbar toggeld..', value, this.state);\r\n            }\r\n        };\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"navbar navbar-expand-sm bg-grey navbar-grey d-flex justify-content-between app-navbar align-items-center\">\r\n            <div>\r\n                <i className=\"fas fa-times my-cursor\"></i>\r\n            </div>\r\n            <div>\r\n                <i className=\"fa fa-sync-alt\" onClick={this.skip} style={{fontSize: \"4vh\"}}></i>\r\n            </div>\r\n            <div className=\"d-flex align-items-center\">\r\n                 <div className=\"app-dropdown\">\r\n                    <i className=\"fa fa-envelope-open-text my-cursor\" onClick = {this.toggle('report')}>Report</i>\r\n                    <div className=\"app-dropdown-content-center d-block\">\r\n                        {this.state.report  && <ReportMenu \r\n                            friendInfo = {this.props.friendInfo}\r\n                            myId = {this.props.user.user._id}\r\n                            toggle = {this.toggle('report')}\r\n                        />}\r\n                    </div>\r\n                </div>\r\n                <div className=\"app-dropdown\">\r\n                    <i className=\"fas fa-search my-cursor\" onClick = {this.toggle('filter')}>Filter</i>\r\n                    <div className=\"app-dropdown-content d-block\">\r\n                        {this.state.filter && <FilterMenu\r\n                            toggle = {this.toggle('filter')}\r\n                        />}\r\n                    </div>\r\n                </div>\r\n                <div className=\"app-dropdown\" style={{float: \"right\"}}>\r\n                    <img src={this.props.user.user.avatar?`${url}${this.props.user.user.avatar}`:`${url}/public/avatar/myavatar.jpg`} alt=\"John Doe\" className=\"rounded-circle shadow my-cursor app-user-avatar app-btn\" />\r\n                    <div className=\"app-dropdown-content\">\r\n                        <div onClick={this.props.toggleProfile} className=\"app-menu-item app-btn\">Profile</div>\r\n                        <hr style={{padding: '0px', margin: '0px', width:'100%'}} />\r\n                        <div onClick={this.logOut} className=\"app-menu-item app-btn\"><i className=\"fa fa-sign-out-alt\">Log out</i></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const { user } = state.auth;\r\n  return {\r\n    user,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(NabBar);\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction VideoPanel({ peerSrc, localSrc, config, mediaDevice, status, endCall }) {\r\n  const peerVideo = useRef(null);\r\n  const localVideo = useRef(null);\r\n  const [video, setVideo] = useState(config.video);\r\n  const [audio, setAudio] = useState(config.audio);\r\n\r\n  useEffect(() => {\r\n    if (peerVideo.current && peerSrc) peerVideo.current.srcObject = peerSrc;\r\n    if (localVideo.current && localSrc) localVideo.current.srcObject = localSrc;\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (mediaDevice) {\r\n      mediaDevice.toggle('Video', video);\r\n      mediaDevice.toggle('Audio', audio);\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Turn on/off a media device\r\n   * @param {String} deviceType - Type of the device eg: Video, Audio\r\n   */\r\n  const toggleMediaDevice = (deviceType) => {\r\n    if (deviceType === 'video') {\r\n      setVideo(!video);\r\n      mediaDevice.toggle('Video');\r\n    }\r\n    if (deviceType === 'audio') {\r\n      setAudio(!audio);\r\n      mediaDevice.toggle('Audio');\r\n    }\r\n  };\r\n\r\n  return (\r\n        <div className=\"d-flex app-video-panel\">\r\n            <div className=\"app-video-panel-wrapper\">\r\n                {peerSrc ? <video  className=\"app-video-player\" ref={peerVideo} autoPlay/>\r\n                : <img src=\"./system/screen.png\" className=\" app-video-player\" alt=\"Cinque Terre\" />}\r\n            </div>\r\n            <div className=\"fade-container app-video-panel-wrapper\" style={{alignItems: 'center'}} >\r\n                {localSrc ? <video  className=\"fade-image app-video-player\" ref={localVideo} autoPlay muted/>\r\n                : <img src=\"./system/screen.png\" className=\"fade-image app-video-player\" alt=\"Cinque Terre\" /> }\r\n                <div className=\"fade-middle d-flex\">\r\n                    <div \r\n                        className=\"fade-text my-cursor app-btn\"\r\n                        onClick={() => toggleMediaDevice('audio')} >\r\n                            audio {audio?\"on\":\"off\"}\r\n                    </div>\r\n                    <div \r\n                        className=\"fade-text my-cursor app-btn\"\r\n                        onClick={() => toggleMediaDevice('video')}>\r\n                            video {video?\"on\":\"off\"}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n  );\r\n}\r\n\r\nVideoPanel.propTypes = {\r\n  localSrc: PropTypes.object, // eslint-disable-line\r\n  peerSrc: PropTypes.object, // eslint-disable-line\r\n  config: PropTypes.shape({\r\n    audio: PropTypes.bool.isRequired,\r\n    video: PropTypes.bool.isRequired\r\n  }).isRequired,\r\n  mediaDevice: PropTypes.object, // eslint-disable-line\r\n};\r\n\r\nexport default VideoPanel;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nconst url = process.env.REACT_APP_SOCK;\r\nclass Msg extends Component {\r\n  LeftMsg = () => {\r\n    return(\r\n        <div className=\"d-flex app-msg-p\">\r\n            <img src={this.props.avatar?`${url}${this.props.avatar}`:`${url}/public/avatar/unknown.png`} alt=\"\" className=\"rounded-circle my-cursor app-msg-client-avatar\" onClick={this.props.toggle()}/>\r\n            <div className=\"app-max-width-70\">\r\n              <div className=\" shadow app-msg-left\">\r\n                {this.props.msg.text}\r\n              </div>\r\n              <p className=\"app-color-grey\">{this.props.msg.time}</p>\r\n            </div>\r\n        </div>\r\n    );\r\n  }\r\n  RightMsg = () => {\r\n    return( \r\n        <div className=\"d-flex justify-content-end app-msg-p\">\r\n        <div className=\"app-max-width-70\">\r\n          <div className=\"shadow app-msg-right\">\r\n            {this.props.msg.text}\r\n          </div>\r\n          <p className=\"app-color-grey app-textalign-right\">{this.props.msg.time}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  LeftFileMsg = () => {\r\n    return(\r\n        <div className=\"d-flex app-msg-p\">\r\n        <img src={this.props.avatar?`${url}${this.props.avatar}`:`${url}/public/avatar/unknown.png`} alt=\"\" className=\"rounded-circle my-cursor app-msg-client-avatar\" onClick={this.props.toggle()}/>\r\n        <div>\r\n          <div className=\" shadow fade-container app-msg-img-border\">\r\n            <img src={url+this.props.msg.src} alt=\"\" className=\"fade-image my-cursor app-file-upload-img\" />\r\n            <div className=\"fade-middle d-flex\">\r\n              <div className=\"fade-text my-cursor app-btn\" onClick={this.props.viewImage(url+this.props.msg.src)}>View</div>\r\n              <div className=\"fade-text my-cursor app-btn\"><a target=\"_blank\" href={url+this.props.msg.src} className=\"app-download\" download>Download</a></div>\r\n            </div>\r\n          </div>\r\n          <p className=\"app-color-grey\">{this.props.msg.time}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  RightFileMsg = () => {\r\n    return(\r\n        <div className=\"d-flex justify-content-end app-msg-p\">\r\n            <div>\r\n              <div className=\"shadow fade-container my-cursor app-msg-img-border\">\r\n                <img src={url+this.props.msg.src} alt=\"\" className=\"fade-image app-file-upload-img\" />\r\n                <div className=\"fade-middle d-flex\">\r\n                  <div className=\"fade-text my-cursor app-btn\"  onClick={this.props.viewImage(url+this.props.msg.src)}>View</div>\r\n                  <div className=\"fade-text my-cursor app-btn\"><a target=\"_blank\" href={url+this.props.msg.src} className=\"app-download\" download>Download</a></div>\r\n                </div>\r\n              </div>\r\n              <p className=\"app-color-grey app-textalign-right\">{this.props.msg.time}</p>\r\n            </div>\r\n          </div>\r\n    );\r\n  }\r\n  render() {\r\n    const {type} = this.props.msg;\r\n    // console.log(\"msg..\", this.props.msg);\r\n    if(type === 'left_msg') return this.LeftMsg();\r\n    if(type === 'right_msg') return this.RightMsg();\r\n    if(type === 'left_file_msg') return this.LeftFileMsg();\r\n    if(type === 'right_file_msg') return this.RightFileMsg();\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const { user } = state.auth;\r\n  return {\r\n    user,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Msg);\r\n","import React, { Component } from \"react\";\r\nimport socket from '../communicate/socket';\r\nimport UploadService from '../services/upload.service';\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\n\r\nconst url = process.env.REACT_APP_SOCK;\r\n\r\nclass MsgInput extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            isTyping: false,\r\n            text: '',\r\n            file: null,\r\n            fileSrc: null,\r\n            emojiBox: 'hidden',\r\n        };\r\n        this.hiddenFileInput = React.createRef();\r\n    }\r\n    componentDidMount(){\r\n    }\r\n    onEmojiClick = (emoji, event) => {\r\n        console.log(\"Emoji\", emoji);\r\n        this.setState({\r\n            text: this.state.text + emoji.native,\r\n        });\r\n    };   \r\n    sendTyping = ()=>{\r\n        console.log('sendTyping...')\r\n\t\tthis.lastUpdateTime = Date.now();\r\n\t\tif(!this.state.isTyping){\r\n\t\t\tthis.setState({isTyping:true});\r\n\t\t\tsocket.emit('msg_typing', {to: this.props.friendId, status: true});\r\n\t\t\tthis.startCheckingTyping();\r\n\t\t}\r\n\t}\r\n\tstartCheckingTyping = ()=>{\r\n\t\tconsole.log(\"Typing\");\r\n\t\tthis.typingInterval = setInterval(()=>{\r\n\t\t\tif((Date.now() - this.lastUpdateTime) > 300){\r\n\t\t\t\tthis.setState({isTyping:false})\r\n\t\t\t\tthis.stopCheckingTyping()\r\n\t\t\t}\r\n\t\t}, 300)\r\n\t}\r\n\t\r\n\tstopCheckingTyping = ()=>{\r\n\t\tconsole.log(\"Stop Typing\");\r\n\t\tif(this.typingInterval){\r\n\t\t\tclearInterval(this.typingInterval)\r\n\t\t\tsocket.emit('msg_typing', {to: this.props.friendId, status: false});\r\n\t\t}\r\n\t}\r\n    \r\n    sendMsg = async (e) => {\r\n        e.preventDefault();\r\n        console.log(\"send button cliked...\");\r\n        const {text, file} = this.state;\r\n        const {friendId} = this.props;\r\n        if(file != null){\r\n            let fileSrc = await UploadService.uploadImage(file);\r\n            if(fileSrc){\r\n                socket.emit('new_msg', {to: friendId, msg: {\r\n                    type: 'left_file_msg',\r\n                    src: fileSrc,\r\n                }});\r\n                this.props.getMsg({\r\n                    type: 'right_file_msg',\r\n                    src: fileSrc,\r\n                });\r\n            }\r\n        }\r\n        if(text !== ''){ \r\n            socket.emit('new_msg', {to: friendId, msg: {\r\n                type: 'left_msg',\r\n                text,\r\n             }});\r\n             this.props.getMsg({\r\n                type: 'right_msg',\r\n                text,\r\n            });\r\n        }\r\n        this.setState({\r\n            text: '',\r\n            file: null,\r\n            fileSrc: null,\r\n            emojiBox: 'hidden',\r\n        });\r\n    }\r\n    handleText = event => {\r\n        this.setState({text: event.currentTarget.value});\r\n    }\r\n    handleClick = async event => {\r\n      this.hiddenFileInput.current.click();\r\n    };\r\n    handleChange = async event => {\r\n      const fileUploaded = event.target.files[0];\r\n      if(fileUploaded){\r\n          console.log(fileUploaded);\r\n          let ext = fileUploaded.name.split('.').pop().toLowerCase();\r\n          if(ext !== 'jpg' && ext !== 'png' && ext !== 'gif' && ext !== 'jpeg' && ext !== 'bmp') return;\r\n          await this.readURL(fileUploaded);\r\n          await this.setState({file: fileUploaded});\r\n      }\r\n    };\r\n    readURL = async (file) => {\r\n        if (file) {\r\n            var reader = new FileReader();\r\n    \r\n            reader.onload = async (e) => {\r\n              await this.setState({fileSrc: e.target.result});\r\n            };\r\n    \r\n            reader.readAsDataURL(file);\r\n        }\r\n    }\r\n    handleCloseFileupload = () => {\r\n        this.setState({file: null, fileSrc: null});\r\n    }\r\n    handleEmojiBox = () => {\r\n        this.setState({emojiBox: this.state.emojiBox === 'hidden'?'visible':'hidden'});\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"position-relative\">\r\n                <div className=\"app-emoji-picker\" style={{visibility: this.state.emojiBox}}>\r\n                    <Picker onSelect={this.onEmojiClick} />\r\n                </div>  \r\n                 {this.props.friendTyping && \r\n                    <div className=\"dotsContainer shadow app-typing\">\r\n                        <img src={this.props.avatar?`${url}${this.props.avatar}`:`${url}/public/avatar/unknown.png`} alt=\"\" className=\"rounded-circle my-cursor app-msg-client-avatar\"/>  \r\n                        <span id=\"dot1\"></span>\r\n                        <span id=\"dot2\"></span>\r\n                        <span id=\"dot3\"></span>\r\n                    </div>}\r\n                <form onSubmit={ this.sendMsg } className=\"chat-box-tray h-7vh position-relative\">\r\n                    {this.state.fileSrc && <div className='position-absolute app-file-upload'>\r\n                        <div className=\"position-relative\">\r\n                            <img src={this.state.fileSrc} alt='' className=\"app-file-upload-img\"/>\r\n                            <div className=\"app-topright\"><i className=\"fas fa-times my-cursor app-cross\" onClick={this.handleCloseFileupload}></i></div>\r\n                        </div>\r\n                    </div>}\r\n                    <div className=\"d-flex  app-msg-input-wrapper\">\r\n                        <i className=\"material-icons my-cursor\" style={{fontSize: \"5vh\"}} onClick={this.handleEmojiBox}>sentiment_very_satisfied</i>\r\n                        <input type=\"text\" className=\"app-msg-input\" \r\n                            placeholder=\" Type your message here... \"\r\n                            value = {this.state.text}\r\n                            onKeyUp = { e => { if(e.keyCode !== 13) this.sendTyping() } }\r\n                            onChange={this.handleText}\r\n                            style={{fontSize: \"14px\"}}\r\n                        />\r\n                    </div>\r\n                    <div >\r\n                        <i className=\"fa fa-image my-cursor \" style={{fontSize: \"5vh\"}} onClick={this.handleClick}></i>\r\n                        <input type=\"file\"\r\n                            ref={this.hiddenFileInput}\r\n                            onChange={this.handleChange}\r\n                            style={{display:'none'}} \r\n                        /> \r\n                    </div>\r\n                    <div >\r\n                        <i className=\"fa fa-paper-plane my-cursor\" style={{fontSize: \"5vh\"}}\r\n                            onClick={this.sendMsg}\r\n                        ></i>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        );\r\n  }\r\n}\r\n\r\nexport default MsgInput;\r\n","import React, { Component } from \"react\";\r\nimport Msg from './msg';\r\nimport socket from '../communicate/socket';\r\nimport MsgInput from './msg_input';\r\n\r\nclass MsgBox extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            chats:[],\r\n            friendTyping: false,\r\n        };\r\n        this.mtFlag = false;\r\n    }\r\n    componentDidMount(){\r\n        this.mtFlag = true;\r\n        this.scrollDown();\r\n        if(this.props.friendId){\r\n            this.resetChat();\r\n        }\r\n    }\r\n    componentWillUnmount(){\r\n        this.mtFlag = false;\r\n    }\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tthis.scrollDown();\r\n    }\r\n    scrollDown = () => {\r\n\t\tconst { container } = this.refs\r\n\t\tcontainer.scrollTop = container.scrollHeight\r\n\t}\r\n    resetChat = () => {\r\n        const { chats } = this.state;\r\n\t\tsocket.on('msg_typing', async (data) =>{\r\n            if(data.from === this.props.friendId){\r\n                if(this.mtFlag) this.setState({friendTyping: data.status});\r\n            }\r\n        });\r\n\t\tsocket.on('new_msg', (data) => {\r\n            if(data.from === this.props.friendId){\r\n                data.msg.time = this.getTime(new Date(Date.now()));\r\n                if(this.mtFlag) this.setState({chats: [...this.state.chats, data.msg]});\r\n                console.log('after receive msg', chats);\r\n            }\r\n        })\r\n    }\r\n    \r\n    getTime = (date)=>{\r\n        return `${date.getHours()}:${(\"0\"+date.getMinutes()).slice(-2)}`\r\n    }\r\n    \r\n    renderMsg = () => {\r\n        return this.state.chats.map((msg, id) =>{\r\n            return (<Msg\r\n                key={id}\r\n                msg = {msg}\r\n                toggle={this.props.toggle}\r\n                viewImage = {this.props.viewImage}\r\n                avatar={this.props.avatar}\r\n                />);\r\n            })\r\n    };\r\n    getMsg = (msg) => {\r\n        if(this.mtFlag) this.setState({\r\n            chats: [...this.state.chats, {...msg, time: this.getTime(new Date(Date.now()))}]\r\n        });\r\n    }\r\n    render() {\r\n        return (\r\n        <div className=\"d-flex flex-fill flex-column\">\r\n            <div ref='container' className=\"hide-overflow app-msg-box\">\r\n                 {this.renderMsg()}             \r\n            </div>\r\n            <MsgInput\r\n                getMsg={this.getMsg}\r\n                friendId={this.props.friendId}\r\n                avatar={this.props.avatar}\r\n                friendTyping={this.state.friendTyping}\r\n            />\r\n        </div>\r\n        );\r\n  }\r\n}\r\n\r\nexport default MsgBox;\r\n","import React, { Component } from \"react\";\r\n\r\nconst url = process.env.REACT_APP_SOCK;\r\n\r\nclass ClientProfile extends Component {\r\n\r\n  render() {\r\n    console.log(\"toggle\", this.props.toggle);\r\n    const {info} = this.props;\r\n    return (\r\n      <div className=\"app-client-profile-background\" style={{ backgroundImage: `url(${info.avatar?`${url}${info.avatar}`:`${url}/public/avatar/unknown.png`})`}}>\r\n        <div className=\"d-flex flex-column align-items-center app-client-profile\">\r\n          <div className=\"app-cross-div\"><i className=\"fas fa-times my-cursor app-cross\" onClick={this.props.toggle()}></i></div>\r\n          <img src={info.avatar?`${url}${info.avatar}`:`${url}/public/avatar/unknown.png`} className=\"rounded-circle app-client-avatar\" alt=\"Cinque Terre\" />\r\n          <h5 className=\"app-client-name\">{info.username}</h5>\r\n          <p><i className=\"fa fa-map-marker-alt\" style={{color: '#eee'}}/>{info.location}</p>\r\n          <div className=\"app-profile-desc\">\r\n            <p>Gender: {info.gender}</p>\r\n            <p>Age: {info.age}</p>\r\n            <p>About Me:</p>\r\n            <p> {info.aboutMe}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ClientProfile;\r\n","import React, { Component } from \"react\";\r\n\r\nclass ViewImg extends Component {\r\n  render() {\r\n      console.log(\"viewImage\", this.props.src);\r\n    return (\r\n        <div className=\"image-modal\">\r\n            <span className=\"close\" onClick={this.props.toggle('')}>&times;</span>\r\n            <img src={this.props.src} className=\"modal-content\" alt=\"\"/>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default ViewImg;\r\n","import React, { Component } from \"react\";\r\n\r\nclass Loading extends Component {\r\n\r\n  render() {\r\n    return ( \r\n        <div className=\"app-loading\">\r\n            <div className=\"dotsContainer\" >\r\n              <h1>Finding</h1>\r\n              <span id=\"dot1\"></span>\r\n              <span id=\"dot2\"></span>\r\n              <span id=\"dot3\"></span>\r\n            </div>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Loading;\r\n","import React, { Component } from \"react\";\nimport Form from \"react-validation/build/form\";\nimport CheckButton from \"react-validation/build/button\";\nimport UploadService from '../services/upload.service';\nimport countryList from 'react-select-country-list';\nimport { connect } from \"react-redux\";\nimport {  update } from \"../actions/auth\";\nconst url = process.env.REACT_APP_SOCK;\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n    const {user} = this.props.user;\n    this.state = {\n      username: user.username,\n      password: user.password,\n      age: user.age,\n      gender: user.gender,\n      location: user.location,\n      aboutMe: user.aboutMe,\n      file: null,\n      avatarSrc: null,\n      successful: false,\n    };\n    this.hiddenFileInput = React.createRef();\n    this.locationOptions = countryList().getData().map((item, idx) => {\n      return <option key={idx}>{item.label}</option>;\n    });\n  }\n\n  onChangeUsername = (e) => {\n    this.setState({\n      username: e.target.value,\n    });\n  }\n  onChangeAge = (e) => {\n    this.setState({\n      age: e.target.value,\n    });\n  }\n  onChangeGender = (e) => {\n    this.setState({\n      gender: e.target.value,\n    });\n  }\n  onChangeLocation = (e) => {\n    this.setState({\n      location: e.target.value,\n    });\n  }\n  onChangeAboutMe = (e) => {\n    this.setState({\n      aboutMe: e.target.value,\n    });\n  }\n  onChangePassword = (e) => {\n    this.setState({\n      password: e.target.value,\n    });\n  }\n\n  handleUpdate = async (e) => {\n    e.preventDefault();\n\n    this.setState({\n      successful: false,\n    });\n\n    this.form.validateAll();\n    const {file, username, age, gender, location, password, aboutMe} = this.state;\n    let avatar;\n    if (this.checkBtn.context._errors.length === 0) {\n      if(file){avatar = await UploadService.uploadAvatar(file);}\n      var user = await this.props.dispatch( update( { username, age, gender, location, password, aboutMe, avatar }, this.props.user.token) );\n      if(user.success === true) {this.props.toggleProfile();}\n      else { this.setState({loading: false});}\n    }else {this.setState({loading: false,});}\n  }\n  handleClick = async event => {\n    await this.hiddenFileInput.current.click();\n  };\n  handleChange = async event => {\n    const fileUploaded = event.target.files[0];\n    if(fileUploaded){\n        console.log(fileUploaded);\n        await this.readURL(fileUploaded);\n        await this.setState({file: fileUploaded});\n    }\n  }\n  readURL = async (file) => {\n    if (file) {\n        var reader = new FileReader();\n\n        reader.onload = async (e) => {\n          await this.setState({avatarSrc: e.target.result});\n        };\n\n        reader.readAsDataURL(file);\n    }\n  }\n  render() {\n    const { message } = this.props;\n    const {file, avatarSrc} = this.state;\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"card card-container shadow-lg\" style={{backgroundColor:\"white\"}}>\n        <i className=\"fa fa-arrow-left app-back-icon\" onClick={this.props.toggleProfile}></i>\n          <input type=\"file\"\n                ref={this.hiddenFileInput}\n                onChange={this.handleChange}\n                style={{display:'none'}} \n          /> \n          \n          <img\n            src={file ? avatarSrc : (this.props.user.user.avatar?`${url}${this.props.user.user.avatar}`:`${url}/public/avatar/myavatar.jpg`)}\n            alt=\"profile-img\"\n            className=\"profile-img-card\"\n            onClick={this.handleClick}\n          />\n\n          <Form\n            onSubmit={this.handleUpdate}\n            ref={(c) => {\n              this.form = c;\n            }}\n          >\n            {!this.state.successful && (\n              <div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Username: </div>\n                  <input\n                    type=\"text\"\n                    name=\"username\"\n                    className=\"app-info-input\"\n                    value={this.state.username}\n                    onChange={this.onChangeUsername}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                    required\n                  />\n                </div>\n                <div className=\"d-flex pt-3 justify-content-between form-group\">\n                  <div className=\"d-flex form-group\">\n                    <div style={{color: '#ccc', paddingRight: '6px'}}>gender: </div>\n                    <select \n                      style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                      value={this.state.gender}\n                      onChange={this.onChangeGender}\n                      required\n                    >\n                      <option>Male</option>\n                      <option>Female</option>\n                      <option>orther</option>\n                    </select>\n                    </div>\n                  <div className=\"d-flex form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Age: </div>\n                  <input\n                        type=\"number\"\n                        name=\"username\"\n                        value={this.state.age}\n                        onChange={this.onChangeAge}\n                        style={{ border:'none', borderBottom: \"solid 2px #eee\", width: \"50px\"}}\n                        min='3'\n                        max='150'\n                        required\n                  />\n                  </div>\n                </div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Location: </div>\n                  <select \n                      style={{ border:'none', borderBottom: \"solid 2px #eee\", maxWidth: \"178px\"}}\n                      value={this.state.location}\n                      onChange={this.onChangeLocation}\n                      required\n                    >\n                      {\n                        this.locationOptions\n                      }\n                    </select>\n                </div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Password: </div>\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    className=\"app-info-input\"\n                    value={this.state.password}\n                    onChange={this.onChangePassword}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                  />\n                </div>\n                <div className=\"pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>About me: </div>\n                  <textarea\n                    row=\"3\"\n                    value={this.state.aboutMe}\n                    onChange={this.onChangeAboutMe}\n                    // validations={[required, vpassword]}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\", width: \"100%\"}}\n                  />\n                </div>\n                <div className=\"form-group pt-3\">\n                  <button className=\"btn btn-primary btn-block\" style={{backgroundColor: 'slateblue', border: \"none\"}}>Update</button>\n                </div>\n              </div>\n            )}\n\n            {message && (\n              <div className=\"form-group\">\n                <div className={ this.state.successful ? \"alert alert-success\" : \"alert alert-danger\" } role=\"alert\">\n                  {message}\n                </div>\n              </div>\n            )}\n            <CheckButton\n              style={{ display: \"none\" }}\n              ref={(c) => {\n                this.checkBtn = c;\n              }}\n            />\n          </Form>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  const { user } = state.auth;\n  const { message } = state.message;\n  return {\n    message,\n    user\n  };\n}\n\nexport default connect(mapStateToProps)(Profile);\n","import React, { Component } from 'react';\nimport _ from 'lodash';\nimport socket from '../communicate/socket';\nimport PeerConnection from '../communicate/PeerConnection';\nimport NabBar from './main_navbar';\nimport VideoPanel from './video_panel';\nimport MsgBox from './msg_box';\nimport ClientProfile from './clietn_profile';\nimport ViewImg from './view_img';\nimport Loading from './loading';\nimport { connect } from \"react-redux\";\nimport AuthService from '../services/auth.service';\nimport Profile from \"./profile\";\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n    console.log(this.props.user);\n    this.state = {\n      clientId: '',\n      localSrc: null,\n      peerSrc: null,\n      clientProfileFlag: false,\n      friendId: '',\n      viewImg: '',\n      friendInfo: null,\n      profile: false,\n    };\n    this.pc = {};\n    this.config = null;\n  }\n  componentDidMount() {\n    console.log(\"Main component mounted, current User: \", this.props.user);\n    document.title = this.props.user.user.username;\n    socket\n      .on('init', async ({ id: clientId }) => {\n        console.log('client id..', clientId);\n        this.endCall(false);\n        socket.emit('finding');\n      })\n      .on('request', async ({ from: friendId }) => {\n        console.log('call request from...', friendId);\n\n        this.getFriend(friendId);\n        await this.setState({friendId});\n        await this.startCall(false, friendId, { audio: true, video: true });\n      })\n      .on('call', async (data) => {\n        try{\n          if(data.sdp) {\n            await this.pc.setRemoteDescription(data.sdp);\n            if (data.sdp.type === 'offer') await this.pc.createAnswer();\n          } else await this.pc.addIceCandidate(data.candidate);\n        }catch(err){\n          console.log(\"!!!Error::\", err);\n          await this.endCall(true);\n          socket.emit('finding');\n        }\n      })\n      .on('finding', async (friendId) => {\n        console.log('finding from server ', friendId);\n        if(friendId === 'null'){\n          setTimeout(()=>socket.emit('finding'), 1500);\n        }else{\n          this.getFriend(friendId);\n          await this.setState({friendId: friendId});\n          await this.startCall(true, friendId, { audio: true, video: true });\n        }\n      })\n      .on('end', async (friendId) => {\n        console.log('call end message from...');\n        if(this.state.friendId === friendId || friendId === \"fromServerSocket\"){\n           await this.endCall(false);\n           socket.emit('finding');\n        }\n      })\n      .on('reset', async () => {\n        await this.endCall(true);\n        socket.emit('init', this.props.user.user._id);\n      })\n      .emit('init', this.props.user.user._id);\n\n  }\n  componentWillUnmount(){\n    this.endCall(true);\n    socket.disconnect();\n    console.log(\"main component will unmount now...\", this.pc);\n  }\n  getFriend = async (friendId) => {\n    let response = await AuthService.getFriendInfo(friendId, this.props.user.token);\n    console.log(\"Get friend info from server\", response);\n    if(response.success === true){\n      this.setState({\n        friendInfo: response.user\n      });\n    }else{\n      console.log('Getting friend info from server failed');\n      this.setState({\n        friendInfo: null\n      });\n      this.endCall(true);\n    }\n  }\n  skip = async () => {\n    console.log(\"skip..current friendId\", this.state.friend);\n    await this.endCall(true);\n    socket.emit('finding');\n  }\n  startCall = async (isCaller, friendID, config) => {\n    console.log('start call...', isCaller, friendID, config);\n\n    this.config = config;\n    this.pc = new PeerConnection(friendID)\n      .on('localStream', async (src) => {\n        const newState = { localSrc: src };\n        await this.setState(newState);\n      })\n      .on('peerStream', async (src) => await this.setState({ peerSrc: src }))\n      .start(isCaller, config);\n  }\n\n  endCall = async (isStarter) => {\n    console.log('end call to...', this.state.friendId, isStarter);\n    if (_.isFunction(this.pc.stop)) {\n      await this.pc.stop(isStarter);\n    }\n    this.pc = {};\n    this.config = null;\n    await this.setState({\n      localSrc: null,\n      peerSrc: null,\n      clientProfileFlag: false,\n      friendId: '',\n      viewImg: '',\n      friendInfo: null,\n    });\n  }\n  toggleFriendFlag = (value) => {\n    return async () => {\n      await this.setState({clientProfileFlag: !this.state.clientProfileFlag});\n    };\n  }\n  viewImage = (src) => {\n    return async () => {\n      await this.setState({viewImg: src});\n    };\n  }\n  toggleProfile = async () => {\n    await this.setState({\n      profile: !this.state.profile\n    });\n    if(!this.state.profile) socket.emit('finding');\n    else this.endCall(true);\n  }\n  render() {\n    const { viewImg, localSrc, peerSrc, clientProfileFlag, friendId, friendInfo } = this.state;\n    return (\n      <div> {!this.state.profile && (\n  <div className=\"container-fluid shadow-lg app-main-div\">\n    <NabBar \n      history={this.props.history}\n      skip = {this.skip}\n      endCall={this.endCall}\n      toggleProfile = {this.toggleProfile}\n      friendInfo = {this.state.friendInfo}\n    />\n    <div className=\"d-flex app-board\">\n      {_.isEmpty(this.config) && !friendInfo &&\n        (<Loading />)\n      }\n      {!_.isEmpty(this.config) && friendInfo && (\n            <VideoPanel\n              localSrc={localSrc}\n              peerSrc={peerSrc}\n              config={this.config}\n              mediaDevice={this.pc.mediaDevice}\n            />\n          ) }\n        {!_.isEmpty(this.config) && friendInfo &&  \n          <MsgBox \n              toggle={this.toggleFriendFlag}\n              viewImage={this.viewImage}\n              friendId={this.state.friendId}\n              avatar={this.state.friendInfo.avatar}\n          />}\n        {!_.isEmpty(this.config) && friendInfo && clientProfileFlag && \n          <ClientProfile \n              clientInfo = {this.state.friendInfo}\n              toggle={this.toggleFriendFlag}\n              info={this.state.friendInfo}\n          />}\n     </div>\n        {(viewImg !== '') && <ViewImg\n            src={viewImg}\n            toggle={this.viewImage}\n        />}\n  </div>)}\n  {this.state.profile && <Profile toggleProfile={this.toggleProfile}/>}\n  </div>\n\n    );\n  }\n}\n\n\nfunction mapStateToProps(state) {\n  const { user } = state.auth;\n  const { isLoggedIn } = state.auth;\n  return {\n    user,\n    isLoggedIn,\n  };\n}\n\nexport default connect(mapStateToProps)(Main);\n","import axios from 'axios';\r\n\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL + '/ban';\r\n\r\nconst BanService = {\r\n    create: (ip, token) => {\r\n        return axios.post(API_URL, {ip}, {headers: {token}}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n    delete: (id, token) => {\r\n        return axios.delete(API_URL, {id}, {headers: {token}}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n    createAccount: (id, token) => {\r\n        return axios.post(API_URL+`/account/${id}`, {}, {headers: {token}}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n    deleteAccount: (id, token) => {\r\n        return axios.delete(API_URL + `/account/${id}`, {}, {headers: {token}}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n    getAll: (token) => {\r\n        return axios.get(API_URL+'/getAll', {}, {headers: {token}}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n}\r\n\r\nexport default BanService;\r\n","import React from 'react';\r\nimport socket from '../communicate/socket';\r\nimport banService from '../services/ban';\r\nimport reportService from '../services/report';\r\nimport authService from '../services/auth.service';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\n\r\nconst columns = [\r\n  { field: 'username', headerName: 'Name' },\r\n  { field: 'ip', headerName: 'IP' },\r\n  { field: 'location', headerName: 'Location',  },\r\n  {\r\n    field: 'age',\r\n    headerName: 'Age',\r\n    type: 'number',\r\n    \r\n  },\r\n  { field: 'gender', headerName: 'Gender', },\r\n  { field: 'status', headerName: 'Status',},\r\n];\r\n\r\nexport default class UserTab extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n    render(){\r\n        return (\r\n          <div style={{ height: 400, width: '100%' }}>\r\n            <DataGrid rows={this.props.rows} columns={columns} pageSize={5} checkboxSelection />\r\n          </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport socket from '../communicate/socket';\r\nimport banService from '../services/ban';\r\nimport reportService from '../services/report';\r\nimport authService from '../services/auth.service';\r\nimport UserTab from './user_tab';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\n\r\nexport default class AdminBoard extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n            value: 0,\r\n        }\r\n    }\r\n  \r\n    componentDidMount(){\r\n      this.init();\r\n        socket.emit('admin_getUsers');\r\n        socket.on('admin_getUsers', async (data) => {\r\n          console.log(\"...data from server,,\", data);\r\n        })\r\n    }\r\n    init = async () => {\r\n      let res = await authService.getAll(\"Password1qaz=]'/ThisisAdmin\");\r\n      if(res.success === true){\r\n        await this.setState({\r\n          users: res.users.map((user, idx)=> {\r\n            return {\r\n            id: idx,\r\n            username: user.username,\r\n            ip: 'undefined',\r\n            location: user.location,\r\n            age: user.age,\r\n            gender: user.gender,\r\n            status: user.status};\r\n          })\r\n        });\r\n      }\r\n      res = await banService.getAll(\"Password1qaz=]'/ThisisAdmin\");\r\n      if(res.success === true){\r\n        this.bans = res.bans;\r\n      }\r\n      res = await reportService.getAll(\"Password1qaz=]'/ThisisAdmin\");\r\n      if(res.success === true){\r\n        this.reports = res.reports;\r\n      }\r\n      console.log(\"admin states...\", this.state);\r\n    }\r\n    handleChange = (event, newValue) => {\r\n      this.setState({\r\n        value: newValue\r\n      });\r\n    };\r\n    render(){\r\n      const {value} = this.state;\r\n        return (\r\n              <div>\r\n                  <AppBar position=\"static\">\r\n                    <Tabs\r\n                      variant=\"fullWidth\"\r\n                      value={value}\r\n                      onChange={this.handleChange}\r\n                      aria-label=\"nav tabs example\"\r\n                    >\r\n                      <LinkTab label=\"Page One\"  {...a11yProps(0)} />\r\n                      <LinkTab label=\"Page Two\"  {...a11yProps(1)} />\r\n                      <LinkTab label=\"Page Three\"  {...a11yProps(2)} />\r\n                    </Tabs>\r\n                  </AppBar>\r\n                  <TabPanel value={value} index={0}>\r\n                    <UserTab \r\n                      rows = {this.state.users}\r\n                    />\r\n                  </TabPanel>\r\n                  <TabPanel value={value} index={1}>\r\n                    Page Two\r\n                  </TabPanel>\r\n                  <TabPanel value={value} index={2}>\r\n                    Page Three\r\n                  </TabPanel>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`nav-tabpanel-${index}`}\r\n      aria-labelledby={`nav-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3}>\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `nav-tab-${index}`,\r\n    'aria-controls': `nav-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nfunction LinkTab(props) {\r\n  return (\r\n    <Tab\r\n      component=\"a\"\r\n      onClick={(event) => {\r\n        event.preventDefault();\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass ProtectedRoute extends Component{\r\n    render(){\r\n        if(this.props.user && this.props.isLoggedIn){\r\n            return <Route {...this.props} />;\r\n        }else{\r\n            return <Redirect to='/login' />;\r\n        }\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user, isLoggedIn } = state.auth;\r\n    return {\r\n      user,\r\n      isLoggedIn\r\n    };\r\n  }\r\n  export default connect(mapStateToProps)(ProtectedRoute);\r\n  ","import { createBrowserHistory } from \"history\";\n\nexport const history = createBrowserHistory();\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Router, Switch, Route, Redirect } from \"react-router-dom\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\n\nimport Login from \"./components/login\";\nimport Register from \"./components/register\";\nimport Main from \"./components/main\";\nimport AdminBoard from './components/admin';\nimport ProtectedRoute from './protected_route';\nimport { logout } from \"./actions/auth\";\nimport { clearMessage } from \"./actions/message\";\nimport { history } from './helpers/history';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentUser: undefined,\n    };\n\n    history.listen((location) => {\n      props.dispatch(clearMessage()); // clear message when changing location\n    });\n  }\n\n  componentDidMount() {\n    const user = this.props.user;\n    if (user) {\n      this.setState({\n        currentUser: user,\n      });\n    }\n  }\n\n  logOut = () => {\n    this.props.dispatch(logout(this.props.user));\n  }\n\n  render() {\n    console.log(\"env testing...\", process.env );\n    return (\n      <Router history={history}>\n        <div>\n          <Switch>\n            <Route exact path={\"/\"} ><Redirect to=\"/login\" /></Route>\n            <Route exact path=\"/login\" component={Login} />\n            <Route exact path=\"/register\" component={Register} />\n            <ProtectedRoute exact path=\"/main\" component={Main} />\n            <Route exact path=\"/admin\" component={AdminBoard} />\n          </Switch>\n        </div>\n      </Router>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  const { user } = state.auth;\n  return {\n    user,\n  };\n}\nexport default connect(mapStateToProps)(App);\n","import { SET_MESSAGE, CLEAR_MESSAGE } from \"./types\";\n\nexport const setMessage = (message) => ({\n  type: SET_MESSAGE,\n  payload: message,\n});\n\nexport const clearMessage = () => ({\n  type: CLEAR_MESSAGE,\n});\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can chainge\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}